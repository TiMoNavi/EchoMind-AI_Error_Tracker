# 物理错题分析大框架

> 最后更新：2026-02-20
> 状态：理论设计阶段，持续迭代
> 定位：总纲参考附录——设计哲学+完整错误编号体系（共同语言）
> 衍生文档：前端规格文档.md / 后端接口文档.md / 教研内容文档.md / 提示词工程文档.md
> 核心原则：先穷举最大框架，不同界面/场景坍塌成不同形态
> 约束：①只设计AI提示词拼接 ②题库含图片 ③报告截图 ④不做家长端 ⑤知识点模型讲解有预设工作流

---

## 一、设计哲学（已确认）

### 1.1 最大框架原则
> "我需要最多的错误的可能性，做出一个最大的框架，然后在不同的用户界面和动机和目的情况下坍塌成不同的样子。"

- 不预先简化。穷举所有可能的错误类型、所有可能的分析维度。
- 每个界面只展示该场景需要的"切片"，但底层存储的永远是最大框架。
- 展示层根据学生当前掌握等级决定粗/细粒度（低分段看粗粒度，高分段看细粒度）。
- 首次诊断是最全面的版本（卖钱的500元产品，所有模型的冷启动）。

### 1.2 独立加法原则
> "结构允许能通过学生反馈，我教研越做越多、越做越可靠就行。"

- 框架结构必须支持随时新增错误类型、新增步骤细节、新增专项训练，而不需要重构。
- 任何一个学生的任何一个错误都必须能在框架里找到位置。如果找不到，就新增一种。
- 每个错误类型、每个训练模块都是独立的，增减方便。

### 1.3 错误框架 × 解决方案 = 交叉矩阵
- 错误框架：穷举所有可能错误（9步×每步错误类型×不同来源）
- 解决方案：所有可用的交互形式（12+种）
- 最终产品 = 在特定场景下，从错误框架中取出相关错误，匹配最优解决方案

### 1.4 区分"能教会的"和"需要练出来的"
- 能教会的（AI讲一遍就能解决）→ AI对话/讲解
- 需要练出来的（必须反复练习才能形成）→ 刷题/专项训练/闪卡
- 每个具体错误类型都应标注它适合"讲"还是"练"

### 1.6 认识论锚点（已确认）
> "好框架的标准由什么定义？"——三层视角，各司其职。

**主干视角：经验性错误穷举（C）**
- 不预设理论框架，从真实学生错误出发
- 看到一种新的错就加一种，看到一种解决方案就加一种
- "好"的定义：任何真实学生的任何一个错误，都能在框架里找到位置并匹配到有效干预
- 和1.2"加法原则"天然一致

**优先级定义：高考考试结构（A）**
- 高考是终极评价标准，出题人筛选"能理性建模、准确执行、检验结果"的人才
- 此视角决定"哪些错误值得优先关注"——不是所有错误同等重要，影响高分值🔴题的错误优先级更高
- 和第六章题目态度系统、第七章S场景confidence共同作用

**校验工具：认知科学（B）**
- 不作为设计主轴，但作为"检验9步是否遗漏了某个认知阶段"的校对工具
- 例如：9步目前未显式覆盖"元认知监控"（学生做完后评估自己做得对不对的能力）→ R编号中R9(心理因素)部分覆盖，但不完整，待教研补充
- 认知科学提供的"工作记忆→模式匹配→程序执行→元认知监控"模型可用于验证9步的完整性

**框架目的与衡量标准**
- 终极目标：提分效率最大化（`预测分提升 / 学习时间`）
- V1操作标准：覆盖率 × 可操作性（每种错误都能分类 + 每种分类都有干预方案）
- 质量下限：诊断准确率（AI诊断结果经教研复核的一致率）

**验证方法**
- 覆盖测试（A面）：拿50-100份真实学生错题，用9步+R编号分类，覆盖率≥95%
- 反向构造测试（B面）：对每个E/R编号，问"干预方案是什么？和其他分类的干预是否不同？"——如果干预方案重复→分类需要合并或重新定义
- 两个测试组合确保"不遗漏"且"不冗余"

### 1.5 正向引导原则（已确认）
> "我们的重点是正向引导学生更积极地学习。准确性在数据层，正向引导在展示层。"

- 系统内部最大化准确（R编号、E编号、mastery_value——精确到位）
- 学生看到的最大化鼓励（永远是"你已经有什么 + 下一步 + 你做得到"）
- **永远不说"你不行"，只说"你还差一步"**
- 每个问题都配"这能解决"的信号（如"平均3道题就能攻克"）
- 展示进步比展示现状更重要（"你这周进步了" > "你现在是L3"）
- 不撒谎但选择性展示——有10个问题时，先给3个最容易解决的，让学生体验"我能变好"
- 这是产品的核心护城河之一：**让学生愿意持续用下去**

---

## 二、物理解题9步框架（计算题版本）

> 说明：这是计算题（大题）的完整流程。选择题和实验题有各自的流程变体（见2.2/2.3），但所有流程共享同一个错误类型库。
> 物理的本质是描述和预测运动。

### 2.1 计算题（大题）9步

#### 步骤1：审题
- 读题提取信息（已知量、所求量、约束条件）
- 画图（受力分析图、运动示意图、场景图）
- **可能的错误：**
  - E1.1 漏读条件（"光滑""粗糙"等关键词没看到）
  - E1.2 图画错（力的方向、个数、受力分析图画在原图上导致混乱）
  - E1.3 场景理解错（以为匀速实际加速）
  - E1.4 隐含条件未翻译成物理语言（"恰好不离开地面"→N=0，"最大距离"→末速度为零）
  - E1.5 关键词含义理解错（"恰好运动到C点"=到达时速度为零）
  - E1.6 没画受力分析直接列式（前置习惯缺失，应先画图再列式）
  - [教研持续补充]

#### 步骤2：过程拆分
- 判断几个过程（是否有转折点、碰撞/分离）
- 确定每个过程的起止条件
- 判断每个过程的运动状态
- **可能的错误：**
  - E2.1 过程数量错（漏掉一个阶段）
  - E2.2 过程边界条件错（什么时候脱离/碰撞）
  - E2.3 运动状态判断错（以为匀速实际减速）
  - E2.4 速度为零后未判断后续运动（未比较mg·sinθ与最大静摩擦力）
  - E2.5 摩擦力突变点判断错（共速后静/动摩擦转换，如传送带）
  - E2.6 特殊模型过程段数错（板块"B停后A继续"、弹簧"加速度=0≠共速"）
  - E2.7 多过程题物理量混用（加速段a带入减速段）
  - [教研持续补充]

#### 步骤3：模型识别
- 对每个过程，判断用什么物理模型
- 确认模型的适用条件是否满足
- **可能的错误：**
  - E3.1 选错模型（该用动量守恒用了动能定理）
  - E3.2 不检查适用条件（有外力也用动量守恒）
  - E3.3 混淆相似模型（动量定理 vs 动量守恒）
  - E3.4 二级结论使用条件不清（80%适用20%不适用时出错）
  - E3.5 静/动摩擦力混淆（最大静摩擦≠动摩擦）
  - E3.6 模型变体混淆（弹性vs完全非弹性碰撞，"留在木块中"=共速）
  - E3.7 混淆变加速和匀加速（F变化时仍当匀加速处理）
  - E3.8 绳模型vs杆模型混淆（最高点受力方向不同）
  - E3.9 左手定则主语搞错（电流vs电子运动方向，负电荷时反向）
  - [教研持续补充]

#### 步骤4：公式选择
- 在该模型下选择具体公式（可能有多个候选）
- 穷举可用公式，排除不适用的
- **可能的错误：**
  - E4.1 公式选错（该用v²=v₀²+2ax 用了x=v₀t+½at²）
  - E4.2 选了最麻烦的公式（不是最优解法）
  - E4.3 公式记错（符号/系数记混，如4π²/T²写成4π²T²）
  - E4.4 只背二级结论不知一级公式（遇变式题无法推导）
  - E4.5 动量守恒/动量定理/动能定理三者混淆
  - E4.6 匀变速公式用在非匀变速场景（圆轨道上误用X=V₀T+½AT²）
  - E4.7 自造公式（记不住就发明，必须只用学过的公式）
  - E4.8 公式使用条件不清（如Q=F×ΔX仅特殊情形成立）
  - [教研持续补充]

#### 步骤5：确定研究对象和正方向
- 明确"对谁列式"（整体法 vs 隔离法）
- 确定正方向/参考系
- **可能的错误：**
  - E5.1 研究对象搞混（对A列式的力用到了B身上）
  - E5.2 正方向不统一（不同方程的正方向不一致）
  - E5.3 参考系选择不当
  - E5.4 机械能守恒"主语"搞错（"球的机械能"≠"弹簧+球系统"）
  - E5.5 列式不标主语（未写"对A"或"对B"，导致后续混乱）
  - E5.6 摩擦力/弹力方向判断错（相对运动方向搞反，弹簧压缩弹力朝外非朝下）
  - E5.7 三维空间方向搞混（电流、电场、磁场在立体空间中对应错）
  - [教研持续补充]

#### 步骤6：列方程
- 写出完整方程
- 每个字母对应什么物理量要清楚
- **可能的错误：**
  - E6.1 方程结构错（加减号、等号关系）
  - E6.2 物理量归属错（"这个v是谁的v"）
  - E6.3 漏项（少了一个力/少了一个过程的贡献）
  - E6.4 列"四不像"式子（既非动能定理也非能量守恒，混合拼凑）
  - E6.5 动能定理左边放了不该放的（如热量Q，左边只能是合外力做功）
  - E6.6 列式无目的、无前因（不知道为什么列这个式子）
  - E6.7 未知数与方程数不匹配（三未知数仅一方程，无法求解）
  - E6.8 冲量时间用错（用全程时间而非力作用时间）
  - E6.9 向心力方程写反号（N+mg写成N-mg，不画受力分析凭记忆）
  - E6.10 动量守恒写成减法（应为初态动量之和=末态动量之和）
  - E6.11 量不在同一坐标系（对地位移与相对位移混用）
  - [教研持续补充]

#### 步骤7：代入数值
- 将已知量代入方程
- 注意不同过程的量不要混
- 注意单位统一
- **可能的错误：**
  - E7.1 代错值（V₀和V搞反）
  - E7.2 跨过程混用（第一段的速度当成第二段的，碰前碰后速度混用）
  - E7.3 单位不统一（km/h没换m/s，10g=0.01kg）
  - E7.4 符号错（方向量的正负）
  - E7.5 多过程题分量用混（类平抛初速度用错，应用分解后的分量）
  - E7.6 能量/质量漏项（子弹嵌入后质量应为m₀+M，MGH只写了M）
  - E7.7 多同名量未用角标区分（必须u', u'', u_x区分不同的速度）
  - E7.8 公式中物理量对应边搞错（L/S中哪是长度哪是面积）
  - [教研持续补充]

#### 步骤8：求解计算
- 联立方程组
- 代数化简
- 数值计算
- **可能的错误：**
  - E8.1 代数错误（联立方程化简出错）
  - E8.2 计算错误（基本算术，如21-19算成3）
  - E8.3 有效数字/取值范围忽略
  - E8.4 根号运算错（√16写成16，未完成开根号）
  - E8.5 科学计数法错（10⁻²¹×10¹⁹指数运算出错）
  - E8.6 漏常数（如π未代入，答案差常数倍）
  - E8.7 跳步运算导致出错（脑中直接跳步，未写中间过程）
  - E8.8 除法搞反（F÷m写成m÷F，得到倒数）
  - E8.9 比值约分错（如3:(5/4)等复杂比值）
  - E8.10 公式字母写混（E=BLV写成F=BLV）
  - [教研持续补充]

#### 步骤9：检验
- 结果是否物理上合理
- 量纲/单位是否对
- **可能的错误：**
  - E9.1 跳过检验（大多数学生直接跳过）
  - E9.2 检验了但没发现问题
  - E9.3 结果物理不合理未察觉（加速度过大、时间为负、不可能的数值）
  - E9.4 量纲/单位检验未做（结果的量纲不对）
  - [教研持续补充]
- **产品处理**：做成可选的专项训练，让学生自评是否需要

### 2.2 选择题流程（6步）

> 选择题核心差异：不需完整列式计算，侧重判断和排除。
> 嘉靖的洞察：做对的题也要看所有选项→每个选项可能是一个独立知识点。
> E编号前缀：Es（selection）

#### 步骤Sel-1：审题理解
- 理解题干描述的物理情景和所问问题
- **可能的错误：**
  - Es1.1 题干物理情景理解错（把加速看成匀速等）
  - Es1.2 题干条件遗漏（"缓慢""恰好"等关键词未注意）
  - Es1.3 审题方向搞反（问"正确的"看成"错误的"）
  - Es1.4 图示/图像信息读取错（坐标轴含义、图形趋势看反）
  - Es1.5 多物理过程情景只关注了一部分
  - [教研持续补充]

#### 步骤Sel-2：知识/模型调取
- 判断这道题考什么知识点/用什么模型
- **可能的错误：**
  - Es2.1 不知道这道题考什么知识点/模型
  - Es2.2 知识点/公式/条件记忆错误
  - Es2.3 模型识别错（调取了错误的分析框架）
  - Es2.4 混淆了适用条件不同的公式/定理
  - [教研持续补充]

#### 步骤Sel-3：逐选项分析
- 对每个选项逐一判断正确/错误
- **可能的错误：**
  - Es3.1 概念性判断错误（对某选项的物理判断有误）
  - Es3.2 未识别选项中"绝对化"表述（"一定""必然""所有"）
  - Es3.3 选项中隐含条件未注意
  - Es3.4 定性判断错误（方向/大小/正负/增减关系）
  - Es3.5 选项需简单计算但算错
  - Es3.6 图像/图表选项分析错误（斜率/截距/面积含义理解错）
  - Es3.7 特殊值/极限情况分析遗漏
  - [教研持续补充]

#### 步骤Sel-4：排除与选择
- 排除错误选项，确认正确选项
- **可能的错误：**
  - Es4.1 排除了正确选项
  - Es4.2 没排除错误选项
  - Es4.3 蒙对（凭感觉选对但不理解）
  - Es4.4 在两个选项之间犹豫后选错（改答案改错了）
  - [教研持续补充]

#### 步骤Sel-5：多选完整性检查
- 多选题检查是否有遗漏的正确选项
- **可能的错误：**
  - Es5.1 多选题漏选（少选了正确选项）
  - Es5.2 多选题多选（多选了错误选项）
  - Es5.3 多选策略错误（该保守少选时贪心多选，或反之）
  - [教研持续补充]

#### 步骤Sel-6：一致性验证
- 检查选的答案是否与题意一致
- **可能的错误：**
  - Es6.1 选了"正确的"但题目问"错误的"（审题回查遗漏）
  - Es6.2 涂卡/填写错误
  - Es6.3 未回查是否所有选项都判断过
  - [教研持续补充]

### 2.3 实验题流程（5步）

> 实验题核心差异：涉及实验方案设计、仪器使用、数据处理、误差分析，与计算题9步几乎不重叠。
> E编号前缀：Ee（experiment）

#### 步骤Exp-1：实验原理与目的
- 理解实验依据什么物理定律/公式，要测什么量
- **可能的错误：**
  - Ee1.1 实验原理不理解
  - Ee1.2 实验目的不清楚（不知道要测什么物理量）
  - Ee1.3 混淆验证性实验和探究性实验
  - Ee1.4 不知道间接测量与直接测量的区别
  - [教研持续补充]

#### 步骤Exp-2：实验方案与器材
- 理解/设计实验方案、选择合适器材
- **可能的错误：**
  - Ee2.1 器材选择错误（量程/精度/灵敏度不合适）
  - Ee2.2 实验方案设计有漏洞（控制变量不对、缺少对照组）
  - Ee2.3 电路连接方式错误（安培表内接/外接、分压/限流选择错）
  - Ee2.4 不知道标准实验方案
  - Ee2.5 混淆不同实验的方案
  - Ee2.6 多余器材/缺少必要器材未识别
  - [教研持续补充]

#### 步骤Exp-3：实验操作与数据
- 操作步骤、读数、记录数据
- **可能的错误：**
  - Ee3.1 读数方法错误（该估读未估读，或反之）
  - Ee3.2 有效数字处理错误
  - Ee3.3 操作顺序错误
  - Ee3.4 游标卡尺/螺旋测微器/多用电表读数错
  - Ee3.5 数据记录不规范（未列表、无单位、精度不统一）
  - [教研持续补充]

#### 步骤Exp-4：数据处理与结论
- 作图、计算、得出结论
- **可能的错误：**
  - Ee4.1 作图方法错误（描点/画线/取斜率方法错）
  - Ee4.2 计算公式用错（从图像推导物理量的公式搞错）
  - Ee4.3 数据取舍不当（异常点未排除或误排除有效数据）
  - Ee4.4 图像横纵坐标理解错（不是直接物理量而是变换后的量）
  - Ee4.5 结论表述不规范
  - Ee4.6 图像斜率/截距的物理含义理解错
  - [教研持续补充]

#### 步骤Exp-5：误差分析与改进
- 分析误差来源、提出改进方案
- **可能的错误：**
  - Ee5.1 系统误差分析不出来
  - Ee5.2 偶然误差与系统误差混淆
  - Ee5.3 改进方案不合理
  - Ee5.4 不会判断实验结果偏大/偏小
  - Ee5.5 不会分析"如果用了错误方法，结果如何变化"
  - [教研持续补充]

---

## 三、题目来源分类（已确认）

> 核心原则：不同来源的题目服务不同目的，不追求统一处理流程，追求清晰。每种来源是独立设计，增减方便。

### 3.1 来源列表

| 编号 | 来源 | 目的 | 答案情况 | AI分析能力 | 特殊处理 |
|------|------|------|----------|-----------|---------|
| T1 | 我们题库-模型母题（每模型2个） | 冷启动/基础验证 | 预设标准答案和步骤 | 高（预设比对） | 两个母题是模型训练的入口 |
| T2 | 我们题库-模型变式题 | 训练/测试 | 预设标准答案和步骤 | 高（预设比对） | 模型训练6步中使用 |
| T3 | 我们题库-知识点测试题 | 知识点验证 | 预设标准答案 | 高（规则匹配） | 闪卡/recall使用 |
| T4 | 我们题库-快检探针题 | 快速定位问题 | 预设标准答案 | 高（规则匹配） | 30秒，P19弹窗 |
| T5 | 我们题库-诊断题（首次/注册） | 全面冷启动 | 预设标准答案和步骤 | 高（预设比对） | 500元诊断产品核心 |
| T6 | 学生上传-单道作业题 | 状态更新 | 需学生上传答案 | 中（AI比对+5轮诊断） | 难题必须有答案 |
| T7 | 学生上传-考试卷错题 | 全面评估 | 需学生上传答案 | 中（同T6） | 批量处理 |
| T8 | 系统推送-延时复测题 | 验证L4→L5 | 预设标准答案 | 高（预设比对） | 3/7/30天触发 |
| T9 | 系统推送-专项训练题 | 针对特定根因 | 预设标准答案 | 高（预设比对） | 根因≥3次触发 |

### 3.2 AI能力边界（待测试）
- 中国大模型解高中物理难题的准确度：**未测试，需要实测**
- 当前策略：我们题库（T1-T5, T8-T9）有预设答案，AI做比对，不需要AI自己解题
- 学生上传题（T6-T7）：要求学生同时上传标准答案。难题强制要求，简单题提醒
- AI做的不是"解题"，是"把学生答案和标准答案比对，分析差异在9步中的哪一步"
- **OCR识别学生手写步骤**：未测试，先记录，也许可以做（用户最新想法）

---

## 四、诊断模式（已确认方向）

### 4.0 首次诊断的冷启动流程（500元产品）

> 核心卖点不是"错题分析"，是"全知识点/模型/高考卷子的掌握程度预测"

**流程**：
1. 基础信息：地区、年级、目标分数
2. 学生填写过去大概分数（高一/高二分数段）→ 系统分3-5档
3. 上传最近一次考试卷（必须有标准答案）→ AI处理每题对/错/部分对
4. 系统从卷子提取：每道题涉及哪些模型/知识点 → 对应mastery_value更新
5. 卷子未覆盖的模型/知识点 → 用分档默认值兜底
6. 错题做深度AI诊断（5轮对话 × 若干题）→ 9步定位 + R根因
7. **输出**：综合掌握预测报告

**500元产品的核心输出**（已确认方向）：
- 层1-掌握全景：知识点段位+模型段位+高考预测分（30秒看完）
- 层2-提分空间：top3最值得突破的模型/知识点（2分钟看完）
- 层3-行动路径：每个空间预计多久解决+总提分预期（1分钟看完）
- 层4-详细分析：每道错题的9步定位+R根因（想看的人看）
- **家长看层1-2就觉得值，学生看层3就知道该做什么，层4是增值**

**500元 vs 3000元的边界**（Q5=C已确认）：
- 500元 = 极致诊断报告（让学生/家长觉得"第一次有人真正搞清楚了我"）
- 3000元 = 诊断报告 + 所有训练功能 + mastery持续更新 + 每周预测分更新 + 直到高考
- 500元证明"我们真的懂你"，3000元给"解决方案"

**为什么要求上传卷子**：
- 卷子是已有材料，不需额外做题
- 一张卷子覆盖大量模型/知识点，效率最高
- 付费场景下学生配合度高
- 大幅提升初始mastery_value的准确度

**分档初始值**（待教研定义）：
- [ ] 档1: <40分 → mastery_value初始=?
- [ ] 档2: 40-55分 → mastery_value初始=?
- [ ] 档3: 55-70分 → mastery_value初始=?
- [ ] 档4: 70-85分 → mastery_value初始=?
- [ ] 档5: >85分 → mastery_value初始=?

### 4.1 深度诊断（"连讲带问"模式）
- 场景：首次诊断、上传作业/考试主动诊断、训练中做错深入分析
- 流程：
  1. 先问学生"这道题整个运动过程大概是什么样的"
  2. 再问"第一问你的解题思路是什么"
  3. AI沿着9步逐步排查，找到断点
  4. 在断点处展开讲解+追问
- 本质：假设-验证循环，像老师上课
- AI成本：约0.5元/道（5轮对话）

### 4.2 快速诊断
- 场景：碎片化时间、快检、模型训练中的即时反馈
- 目的：**在最短时间内找到这个学生最大的问题在哪**（是一种目标，不是一种固定形式）
- 可能的实现：
  - 精选探针题（30秒出结果）
  - 连续判断题（每题10秒，5-10道）
  - AI直接从错误模式推断（基于历史数据）
- 探针题的设计方法论：**待教研深入**

### 4.3 做对的题处理
- AI追问1-2个核心关键问题（独立提示词）
- 不是每道题都追问，基于策略（随机/蒙对检测/行为数据判断）
- 嘉靖洞察：选择题4个选项=4个知识点，做对了也可能只懂1/4

---

## 五、掌握等级体系（架构已确认，细节待设计）

### 5.1 架构决策（已确认）

**双层架构**（Q2=C, Q5=A）：
- **底层**：连续数值 mastery_value（0-100），用于系统内部所有运算
- **展示层**：离散等级标签（颜色/名称），用于学生/家长查看

**底层 mastery_value 的消费者清单**：

| 类型 | 消费者 | 需要什么 |
|------|--------|---------|
| 展示 | 首页热力图/掌握列表 | mastery_value → 映射到离散等级颜色 |
| 展示 | 诊断报告（500元产品） | 映射到等级 + 具体薄弱点描述 |
| 展示 | 周报等级变化 | 前后mastery_value差值 |
| 展示 | 预测分数 | mastery_value → 答对概率 → 预测分 |
| 展示 | H5分享页 | 映射到离散等级 |
| 决策 | 推荐算法 | 直接用mastery_value排序 |
| 决策 | 题目态度生成 | mastery_value + 目标分数 → 态度等级 |
| 决策 | 延时复测触发 | mastery_value达到阈值 → 启动复测计时 |
| 决策 | 专项训练触发 | 根因计数达到阈值（独立于mastery_value，见第十章） |
| 决策 | 快检触发 | 14天未更新 + mastery_value在某范围 |
| 更新 | 每次做题/诊断后 | confidence加权更新mastery_value |

### 5.2 更新机制（待设计细节）

**基本逻辑**：
- 每次错误：`mastery_value -= penalty × confidence`
- 每次正确：`mastery_value += reward × confidence`
- confidence 来自S场景的可靠性值（见第七章S场景表）
- penalty/reward 的大小取决于：当前mastery_value、错误在9步中的位置、错误严重程度

**已确认的原则**：
- 不同可靠性的数据贡献不同的更新量（confidence加权）
- 训练中做错 vs 测试中做错：通过S场景的confidence自然区分（不需要单独设权重）
- 时间衰减：mastery_value可以随时间缓慢降低（遗忘保护机制，参数待定）
- 知识点和模型使用**同一套框架，不同参数**（Q3=B）：
  - 知识点：reward/penalty偏向记忆类，时间衰减更快（记忆遗忘曲线更陡）
  - 模型：reward/penalty偏向应用类，时间衰减更慢（方法性知识遗忘慢）

**冷启动方案**（已确认方向）：
1. 学生填写过去大概分数（高一/高二）→ 系统分3-5个档
2. 上传最近一次考试卷（付费用户，准确度大幅提升）→ AI处理每题对/错
3. 卷子覆盖的模型/知识点 → 根据对错更新mastery_value
4. 卷子未覆盖的 → 用分档默认值兜底
5. 错题做深度AI诊断 → 进一步精确更新
- **优点**：卷子是已有材料，不需额外做题；付费场景下学生配合度高

**更新公式（已确认A+B方案）**：
- `reward = base_r × (1 - mastery/100) × confidence × step_weight`
- `penalty = base_p × (mastery/100) × confidence × step_weight`
- base_r = 10, base_p = 15（做错惩罚略大于做对奖励）
- step_weight: 步骤1-2(审题/拆分)=1.2, 步骤3-6(建模/列式)=1.0, 步骤7-9(代入/计算/检验)=0.7
- 示例：mastery=50, confidence=1.0, 步骤3错误 → penalty = 15×0.5×1.0×1.0 = 7.5

**待设计**：
- [ ] 时间衰减的速率和触发条件
- [ ] 分档的具体区间和初始mastery_value
- [ ] mastery_value的上下界保护（不能低于0、不能溢出100）
- [ ] 知识点和模型的参数差异具体多大（base_r/base_p/衰减率各差多少）
- [ ] 连续对/错加速机制（V2考虑）

### 5.3 展示层映射（已确认方向）

**游戏段位制：大等级×小等级 = 10级**（已确认方向）

设计思路（类似游戏段位）：
- **大等级**（5个）：决定颜色，一眼看出阶段
- **小等级**（每个大等级内2个）：决定深浅/编号，精确定位
- 示例结构：探索I→探索II→启航I→启航II→突破I→突破II→精通I→精通II→王者I→王者II

**展示方式**：
- 热力图：用大等级的颜色渐变（连续感）
- 列表/报告：显示段位名称（如"启航II"）
- 段位升级时有明确的视觉反馈（成就感）

**正向引导原则**（已确认）：
- 学生永远不看到R编号/E编号等技术标签
- 展示层只说"你已经有什么 + 下一步做什么 + 为什么做得到"
- 进步比现状更重要——优先展示mastery_value的变化，而非绝对值
- 每个问题都配"平均X道题就能攻克"的可解决信号
- 不说"问题"说"提分空间"

**待设计**：
- [ ] 5个大等级的具体名称和颜色
- [ ] 每个大等级内小等级的mastery_value切分点
- [ ] 知识点和模型是否用相同的段位名称

### 5.4 旧版L0-L5参考（待替换为新映射）
- L0: 未接触 → mastery_value = 0
- L1: 记不住 → mastery_value ≈ 10-20
- L2: 理解不深 → mastery_value ≈ 20-40
- L3: 使用出错 → mastery_value ≈ 40-60
- L4: 能正确使用 → mastery_value ≈ 60-80
- L5: 稳定掌握 → mastery_value ≈ 80-100

---

## 六、题目态度系统（待重新设计）

### 6.1 已确认的原则
- 旧版🔴🟡⚪需要重新设计
- 上限10级（颜色/标记）
- 目标分数驱动：不同目标分数的学生对同一道题有不同态度
- 嘉靖的"70分学生别碰压轴"逻辑应体现
- 需要和掌握等级体系配合

### 6.2 待设计的内容
- [ ] 具体几级，每级的定义
- [ ] 和地区卷子结构模板的关联
- [ ] 学生如果想挑战超出等级的题，产品怎么处理

---

## 七、现有触发场景 × 9步框架（待重构）

### 7.1 现有S1-S14场景（从core_framework抽离）

| S编号 | 场景 | 题目来源 | 检测的9步范围 | confidence | AI成本 |
|-------|------|---------|-------------|-----------|-------|
| S1 | 注册诊断失败 | T5 | 全部9步 | 0.7 | ~0.1元/题 |
| S2 | 模型训练Step1失败 | T2 | 步骤3（模型识别） | 1.0 | 0 |
| S3 | 模型训练Step2失败 | T2 | 步骤4（公式选择） | 1.0 | 0 |
| S4 | 模型训练Step3-5失败 | T2 | 步骤5-7 | 0.9 | ~0.1元 |
| S5 | 模型训练Step6失败 | T2 | 全部9步 | 0.9 | ~0.1元 |
| S6 | 知识点recall失败 | T3 | 步骤4（公式记忆） | 0.5 | ~0.01元 |
| S7 | 知识点Step4失败 | T3 | 步骤4（公式使用） | 1.0 | 0 |
| S8 | 上传作业→AI诊断 | T6 | 全部9步 | 0.8 | ~0.5元 |
| S9 | 上传考试→AI诊断 | T7 | 全部9步 | 0.8 | ~0.5元 |
| S10 | 上传但3天未诊断 | T6/T7 | 未知 | 0.2 | 0 |
| S11 | 快检失败 | T4 | 步骤3（模型识别） | 0.4 | 0 |
| S12 | 延时复测失败 | T8 | 全部9步 | 0.9 | ~0.1-0.3元 |
| S13 | 审题训练失败 | T9 | 步骤1-2 | 0.8 | 0 |
| S14 | 闪卡"忘了" | - | 步骤4（记忆层） | 0.2 | 0 |

> confidence值说明：每个S场景有独立的confidence值（0-1），反映该场景下错误记录的可靠性。值越高，对mastery_value的更新影响越大。初始值基于判断设定，V2有数据后校准。

### 7.2 框架关系
- S场景 = "在什么产品动作中发现错误"（+ confidence可靠性）
- 9步 = "错误在解题过程中的位置"（What/Where）
- 错误类型（E编号）= "具体错什么"
- 根因（R编号）= "为什么犯这个错"（Why）——见第十章
- 完整记录 = S场景 + 9步位置 + E错误类型 + R根因 + 题目来源（T编号） + confidence
- **完整记录结构见第十章 10.2**

### 7.3 待做
- [ ] 每个S场景明确：哪些9步是该场景能检测到的，哪些不能
- [ ] 不能检测的部分是否需要补充机制（比如S2只能检测步骤3，但学生可能步骤1就错了）

---

## 八、现有交互形式（从core_framework抽离）

| # | 交互形式 | 所在模块 | 交互特点 |
|---|---------|---------|---------|
| 1 | 选项选择+排除 | 模型训练Step 1-2 | 给列表，学生逐个排除 |
| 2 | AI对话讲解 | 模型Step 3、知识点Step 1-3 | 对话气泡，学生确认理解 |
| 3 | 陷阱判断 | 模型Step 4 | 展示错误做法，学生找错 |
| 4 | 分步填空 | 模型Step 5 | 每步填物理量/公式/结果 |
| 5 | 完整做题 | 模型Step 6、变式题 | 学生写完整解答 |
| 6 | 结构化重述 | 审题训练P18 | 4步表单 |
| 7 | 公式recall | 知识点recall测试 | 开放题写公式→AI判 |
| 8 | 概念选择题 | 知识点Step 4 | 选择题匹配预设答案 |
| 9 | 闪卡翻转 | 记忆Tab | 正面→翻→三按钮 |
| 10 | 快检选择 | P19弹窗 | 给题选模型，30秒 |
| 11 | 对比表阅读 | M3易混对比 | 展示对比表+确认 |
| 12 | 拍照标注 | M2上传 | 拍照→列表→逐题标对错 |

### 8.1 交互形式 × 错误类型的对应关系（待完善）
- 每种错误类型应有1-2个"最优交互形式"
- 例如：E3.3混淆相似模型 → #11对比表 + #1选项排除
- 例如：E8.2计算错误 → #4分步填空（专注计算步）
- **这个交叉矩阵需要教研逐步填充**

---

## 九、专项训练（从core_framework抽离 + 待扩展）

### 9.1 现有专项训练类型

| 类型 | 触发根因模式 | 使用的交互形式 | 需要什么 |
|------|-------------|-------------|---------|
| 审题关键词标记 | 审题类根因反复 | #6+标出关键词 | 预设题目+标准答案 |
| 限时做题 | 时间管理根因反复 | #4或#5+计时器 | 预设题目+时限 |
| 整体法vs隔离法辨析 | 混淆方法反复 | #11+#1+#5 | 预设对比表+题目 |
| 计算专项 | 计算类根因反复 | #4专注计算步 | 预设计算题 |
| 代入物理量专项 | 代入错反复 | #4专注代入环节 | 预设题目 |
| 检验训练 | 学生自评需要 | 待设计 | 预设题目+检验标准 |
| 拆解训练（新增） | 复杂题做不出来 | 给难题只列阶段和公式不计算 | 预设难题 |

### 9.2 触发规则（已确认）
- 同一根因总出现次数≥3 且 最近14天内至少1次 → 触发
- 这里的"根因"对应E编号

### 9.3 待做
- [ ] 拆解训练的具体设计（嘉靖："公式全罗列到答题纸上能拿80%的分"）
- [ ] 检验训练的具体设计
- [ ] 每种专项训练的退出条件

---

## 十、根因分类体系（新增）

> 9步回答"错在哪一步"（What/Where），根因回答"为什么犯这个错"（Why）。
> 两个维度交叉 = 最完整的错误分析。
> 根因分类独立于9步，支持加法原则。

### 10.1 根因类别列表

| R编号 | 根因类别 | 含义 | 典型表现 | 产品干预方式 |
|-------|---------|------|---------|------------|
| R1 | 概念理解不足 | 物理概念本身理解错误 | 向心力不是实际力；匀速圆周合力不为零；弹簧弹力只与形变量有关 | AI讲解（能教会的） |
| R2 | 前置习惯缺失 | 解题前该做的准备动作没做 | 没画受力分析直接列式；没描述过程直接列式；凭感觉不先想模型 | 结构化重述训练(#6) |
| R3 | 记忆错误 | 公式/定义记不住或记错 | 公式系数记混；自造公式；公式中文名不知道；V=V₀+AT漏V₀ | 闪卡(#9)+recall(#7) |
| R4 | 计算能力不足 | 纯数学运算层面的问题 | 算术错；根号运算错；科学计数法错；跳步运算 | 计算专项训练(#4) |
| R5 | 知识混淆 | 相似概念/模型/公式分不清 | 动量守恒vs定理；弹性vs非弹性碰撞；静vs动摩擦 | 对比表(#11)+选项排除(#1) |
| R6 | 粗心/注意力 | 已经会但因注意力问题犯错 | 漏读条件；代错值；抄错数；符号写反 | 限时训练+关键词标记 |
| R7 | 思维惯性 | 错误思路固化，反复犯同样的错 | 80%概率重复错误思路；背题型导致脆弱 | 变式题反复训练(#5) |
| R8 | 方法不当 | 能做对但方法不最优 | 选了最麻烦的公式；不检查适用条件就用二级结论 | 对比最优解法+优化建议 |
| R9 | 心理因素 | 紧张/不敢写/放弃 | 知道公式但不敢落笔；大题直接跳过 | V1仅记录，不做干预 |
| R10 | 时间管理 | 做题速度/分配不合理 | 简单题花太久；难题不放弃；来不及检验 | 限时训练+策略提醒 |

### 10.2 一条错误记录的完整结构

每条错误记录包含以下字段：

| 字段 | 类型 | 含义 | 示例 |
|------|------|------|------|
| student_id | ID | 谁 | stu_001 |
| timestamp | 时间 | 什么时候 | 2026-02-07 14:30 |
| problem_id | ID | 哪道题 | prob_physics_001 |
| source_T | T1-T9 | 题目来源 | T2（模型变式题） |
| scenario_S | S1-S14 | 在什么产品动作中发现 | S5（模型训练Step6失败） |
| step | 1-9 | 解题第几步出错 | 6（列方程） |
| error_code | E编号 | 具体错什么 | E6.5（动能定理左边放热量） |
| root_cause | R1-R10 | 为什么错（根因） | R1（概念理解不足） |
| confidence | 0-1 | 这条记录的可靠性 | 0.9（来自S5的confidence） |
| ai_explanation | 文本 | AI对根因的说明 | "学生不理解动能定理左边只能写功" |
| model_or_kp | ID | 关联的模型/知识点 | model_动能定理 |

### 10.3 错误计数与专项训练触发

**计数规则**：
- 对同一个根因(R编号)，按confidence加权计数
- `weighted_total = Σ confidence_i`（同一R编号的所有记录）
- `weighted_recent = Σ confidence_i`（同一R编号，最近14天内的记录）
- **触发条件**：`weighted_total >= 3.0 AND weighted_recent >= 1.0`

**示例**：
- 学生在模型训练中3次选错模型(S2, confidence=1.0×3) → weighted_total=3.0 → 触发R5(知识混淆)专项训练
- 学生上传作业2次计算错(S8, 0.8×2=1.6) + 闪卡1次忘了(S14, 0.2) → weighted_total=1.8 → 不触发
- 学生在训练中2次(1.0×2) + 上传作业2次(0.8×2) → weighted_total=3.6 → 如果recent也满足则触发

**计数范围**：
- 触发计数按R编号聚合（跨步骤、跨模型都算）
- 展示时可按step或model细分
- 每个R编号独立计数、独立触发

### 10.4 R编号的标注规则

- 系统判定(S2/S3/S7/S11/S13)：根据E编号自动映射到R编号（预设映射表）
- AI诊断(S1/S4/S5/S6/S8/S9/S12)：AI在诊断过程中判定R编号
- 学生自标(S10/S14)：默认R3(记忆错误)，不确定时由后续诊断更正
- AI同时补充ai_explanation自由文本，供教研审查和迭代

### 10.6 R编号鉴别能力与上线策略

> 不是所有R编号在V1都能准确检测。按鉴别能力分三阶段上线。

**阶段1：V1上线即可检测**

| R编号 | 判断方式 | 依据 | 置信度 |
|-------|---------|------|--------|
| R3 记忆错误 | 规则：recall测试失败/闪卡标"忘了" | 写不出来=记不住 | 高 |
| R7 思维惯性 | 规则：同一E编号计数≥3次 | 纯计数，数据在系统中 | 高 |
| R10 时间管理 | 规则：做题时长 vs 预设时限 | 客观计时数据 | 高 |

**阶段2：V1可做，需验证AI准确率**

| R编号 | 判断方式 | 可能的问题 | 验证方法 |
|-------|---------|----------|---------|
| R1 概念不足 | AI在诊断对话中追问概念理解 | AI可能把"记不住"误判为"理解不了" | 教研抽查AI诊断记录 |
| R2 习惯缺失 | AI观察学生是否跳过画图/描述过程 | 只在深度诊断(S8/S9)中可检测 | 预设追问"你会怎么开始这道题" |
| R4 计算不足 | 分步填空前面对后面错 | AI需区分"思路对算错"vs"思路就错了" | 预设题有标准步骤，逐步比对 |
| R5 知识混淆 | 模型训练Step1选错了什么 | 规则判"选错了"，AI判"和什么混淆" | 预设混淆对（易混模型表） |
| R8 方法不当 | AI比较学生解法vs预设最优解法 | 仅预设题可做，上传题很难 | V1只在预设题中检测 |

**阶段3：需要数据积累（上线1-3个月后）**

| R编号 | 问题 | V1策略 |
|-------|------|--------|
| R6 粗心 | 需要"会了但偶尔错"的统计模式（≥5-10次做题数据） | 先不标R6，积累数据后统计（mastery>70但近5次有2次错→可能R6） |
| R9 心理因素 | 系统无法判断学生是否紧张 | V1仅记录行为异常（跳题/异常速度），不自动标注R9 |

### 10.5 E编号→R编号的预设映射（初版，待教研完善）

> 一个E编号可能对应多个R编号。具体是哪个，取决于AI诊断或预设规则。

| E编号范围 | 最可能的R编号 | 次可能 |
|----------|-------------|-------|
| E1.1-E1.3 | R6(粗心) | R2(习惯缺失) |
| E1.4-E1.5 | R1(概念不足) | R6(粗心) |
| E1.6 | R2(习惯缺失) | - |
| E2.1-E2.3 | R1(概念不足) | R7(思维惯性) |
| E2.4-E2.7 | R1(概念不足) | R5(知识混淆) |
| E3.1-E3.9 | R5(知识混淆) | R1(概念不足) |
| E4.1-E4.2 | R5(知识混淆) | R8(方法不当) |
| E4.3-E4.4 | R3(记忆错误) | - |
| E4.5-E4.8 | R5(知识混淆) | R1(概念不足) |
| E5.1-E5.7 | R2(习惯缺失) | R6(粗心) |
| E6.1-E6.11 | R1(概念不足) | R2(习惯缺失) |
| E7.1-E7.8 | R6(粗心) | R2(习惯缺失) |
| E8.1-E8.10 | R4(计算不足) | R6(粗心) |
| E9.1-E9.4 | R2(习惯缺失) | R10(时间管理) |

---

## 十一、5W证据系统的定位（更新）

### 11.1 核心定位
> "做最详细的分析，有靠谱加权的证据"

- 5W是错误记录的底层格式，不是展示格式
- Who：哪个学生（student_id）
- What：做错了什么（E编号 + 具体题目）
- When：在什么场景下（S编号 + 9步位置 + 时间戳）
- Where：哪个知识点/模型（model_or_kp）
- Why：根因（R编号 + AI自由文本说明 + confidence）
- **完整记录结构见第十章 10.2**

### 11.2 加法原则
- 外界优点加进来就行
- 嘉靖的洞察（做对的题也要分析、母题概念、拆解训练等）→ 融入框架
- 新发现的错误类型 → 加入E编号库
- 新发现的根因类型 → 加入R编号库
- 新发现的解决方式 → 加入交互形式列表
- 框架只做加法，不做减法

---

## 十二、待讨论的开放问题

### 高优先级
1. **掌握等级-展示层设计**：映射到几级？名称/颜色？切分点？（关联5.3）
2. **mastery_value更新函数**：penalty/reward的具体公式？时间衰减？（关联5.2）
3. **题目态度系统重新设计**：和mastery_value的关系？几级？（关联第六章）
4. **快速诊断的探针题设计方法论**：什么样的题能在一道题里测出一个精确能力？（关联4.2）
5. **选择题和实验题的流程设计**：和计算题9步的关系是什么？（关联2.2/2.3）
6. **R编号自动映射规则**：系统判定场景下如何从E编号推断R编号？映射表完善（关联10.4/10.5）

### 中优先级
7. AI能力实测：中国大模型解高中物理难题的准确度
8. OCR识别学生手写步骤的可行性
9. 每个S场景能检测到的9步范围 vs 不能检测到的
10. 交互形式 × 错误类型的完整交叉矩阵
11. 不同地区卷子结构模板的具体设计
12. **知识点 vs 模型**：mastery_value用相同还是不同的更新规则？（关联5.2）

### 低优先级（V1之后）
13. 答题规范训练
14. "做对但方法不最优"的检测
15. 社区/社交功能

---

## 十三、衍生文档说明

本文档（大框架）是整个产品的**底层分析引擎和共同语言**。以下4个衍生文档从本文档的错误编号体系出发，面向不同角色提供可执行的规格：

| 文档 | 面向 | 核心内容 |
|------|------|---------|
| 前端规格文档.md | 前端开发 | 页面清单P1-P19+弹窗、路由、组件、交互规范、展示层规则 |
| 后端接口文档.md | 后端开发 | 数据模型、API接口、算法（推荐/预测/掌握度更新）、业务规则 |
| 教研内容文档.md | 教研团队 | E编号全库（含选择题/实验题）、R编号、根因枚举库、题库需求清单、预设内容结构 |
| 提示词工程文档.md | 提示词工程师 | 所有AI场景的prompt模板、变量表、输出格式、成本估算、调优优先级 |

本文档保留为**设计哲学+错误编号体系的参考附录**，4个衍生文档各自独立且自包含。
