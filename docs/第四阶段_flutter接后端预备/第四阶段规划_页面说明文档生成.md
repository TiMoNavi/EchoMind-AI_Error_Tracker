# 第四阶段规划：Flutter 接后端预备 — 21 个页面说明文档生成

## 目标

为第三阶段 Claymorphism 美化完成后的所有 Flutter 页面，生成面向后端开发者的「接入手册」级别文档。每个页面文档包含：当前截图、组件清单、已创建的数据模型、需要的 API 接口、以及接入示例代码。

**核心意图**：后端开发者拿到这份文档后，能直接理解每个页面需要什么数据、什么格式、什么接口，不需要再去读 widget 源码。

---

## 与第三阶段文档的区别

| 维度 | 第三阶段 | 第四阶段 |
|------|----------|----------|
| 当前状态 | "已对齐 HTML 原型" | "Claymorphism 美化完成，后端预备就绪" |
| 截图来源 | 安卓模拟器 | 安卓模拟器（美化后最新截图） |
| 核心新增 | 预期用途 | **数据模型**、**API 接口定义**、**接入示例** |
| 组件详情 | 功能说明 + 预期用途 | 功能说明 + 数据模型 + 当前硬编码值 + 需要的 API |
| 新增章节 | 无 | 「数据模型」「API 接口清单」「接入示例」 |

---

## 文档模板

每个页面一个 `.md` 文件，格式如下：

````markdown
# {page-name}（{中文名}）

## 当前状态

第四阶段：Claymorphism 美化完成，后端预备就绪。数据模型已创建，三态组件（Loading/Error/Empty）已就绪。

## 路由标识

`{routePath}`

## 组件树

```
XxxPage (Scaffold / PageShell)
├── ClayBackgroundBlobs — Claymorphism 浮动背景
├── TopFrameWidget — 页面标题
├── WidgetA — 功能描述
├── WidgetB — 功能描述
└── WidgetC — 功能描述
```

## 页面截图

![{name}-390x844](../flutter截图验证/{name}/full/{name}__390x844__full.png)

---

## 组件详情

### {component-name}

![{component-name}](../flutter截图验证/{name}/components/{component-name}__390x844.png)

- 功能说明: ...
- 对应 dart 文件: `lib/features/{feature}/widgets/{file}.dart`
- 当前数据状态: 硬编码 mock / 已参数化
- 硬编码值: （列出当前写死的具体值）
- 对应数据模型: `XxxModel`（来自 `lib/shared/models/xxx_models.dart`）
- 需要的 API 字段:
  - `field_a` (类型) — 说明
  - `field_b` (类型) — 说明

（每个组件重复以上格式）

---

## 数据模型

本页面使用的数据模型（已创建于 `lib/shared/models/`）：

```dart
// 来自 xxx_models.dart
class XxxModel {
  final String field;
  // ...
  factory XxxModel.fromJson(Map<String, dynamic> json);
}
```

## API 接口清单

| 接口 | 方法 | 用途 | 返回模型 |
|------|------|------|----------|
| `/api/v1/xxx` | GET | 获取xxx数据 | `XxxModel` |

## 接入示例

```dart
// 后端开发者参考：如何将 API 数据注入 widget
final data = XxxModel.fromJson(apiResponse);
XxxWidget(field: data.field);
```

## 页面跳转

- 按钮A → `/target-route`
- 列表项点击 → `/target-route`
````

---

## 页面清单（21 个）

| 序号 | 文件名 | 路由 | 页面名 | 数据模型文件 |
|------|--------|------|--------|-------------|
| 01 | `01_home_首页.md` | `/` | home 首页 | `home_models.dart` |
| 02 | `02_community_社区.md` | `/community` | community 社区 | `community_models.dart` |
| 03 | `03_community-detail_社区详情.md` | `/community-detail` | community-detail 社区详情 | `community_models.dart` |
| 04 | `04_global-knowledge_全局知识点.md` | `/global-knowledge` | global-knowledge 全局知识点 | `global_models.dart` |
| 05 | `05_global-model_全局模型.md` | `/global-model` | global-model 全局模型 | `global_models.dart` |
| 06 | `06_global-exam_全局高考卷.md` | `/global-exam` | global-exam 全局高考卷 | `global_models.dart` |
| 07 | `07_memory_记忆.md` | `/memory` | memory 记忆 | `memory_models.dart` |
| 08 | `08_flashcard-review_闪卡复习.md` | `/flashcard-review` | flashcard-review 闪卡复习 | `flashcard_models.dart` |
| 09 | `09_question-aggregate_单题聚合.md` | `/question-aggregate` | question-aggregate 单题聚合 | `question_aggregate_models.dart` |
| 10 | `10_question-detail_题目详情.md` | `/question-detail` | question-detail 题目详情 | `question_detail_models.dart` |
| 11 | `11_ai-diagnosis_AI诊断.md` | `/ai-diagnosis` | ai-diagnosis AI诊断 | `chat_message.dart` |
| 12 | `12_model-detail_模型详情.md` | `/model-detail` | model-detail 模型详情 | `model_detail_models.dart` + `shared_detail_models.dart` |
| 13 | `13_model-training_模型训练.md` | `/model-training` | model-training 模型训练 | `chat_message.dart` |
| 14 | `14_knowledge-detail_知识点详情.md` | `/knowledge-detail` | knowledge-detail 知识点详情 | `knowledge_detail_models.dart` + `shared_detail_models.dart` |
| 15 | `15_knowledge-learning_知识点学习.md` | `/knowledge-learning` | knowledge-learning 知识点学习 | `chat_message.dart` |
| 16 | `16_prediction-center_预测中心.md` | `/prediction-center` | prediction-center 预测中心 | `prediction_models.dart` |
| 17 | `17_upload-history_上传历史.md` | `/upload-history` | upload-history 上传历史 | `upload_history_models.dart` |
| 18 | `18_weekly-review_周复盘.md` | `/weekly-review` | weekly-review 周复盘 | `weekly_review_models.dart` |
| 19 | `19_profile_我的.md` | `/profile` | profile 我的 | `profile_models.dart` |
| 20 | `20_upload-menu_上传菜单.md` | `/upload-menu` | upload-menu 上传菜单 | 无（纯导航页） |
| 21 | `21_register-strategy_学习策略.md` | `/register-strategy` | register-strategy 学习策略 | 无（纯导航页） |

---

## 执行步骤

### Step 1：截图采集

在安卓模拟器上运行截图脚本，采集美化后的最新截图。

**输出目录**：
```
docs/第四阶段_flutter接后端预备/flutter截图验证/
├── home/
│   ├── full/home__390x844__full.png
│   └── components/*.png
├── community/
│   ├── full/community__390x844__full.png
│   └── components/*.png
... (21个页面同理)
```

### Step 2：逐页生成文档

按页面清单顺序，逐个生成 `.md` 文档。每个文档的生成流程：

1. 读取该页面的 `xxx_page.dart` 和所有 `widgets/*.dart`
2. 读取对应的 `lib/shared/models/xxx_models.dart`
3. 提取硬编码值、参数接口、路由跳转
4. 按模板填写所有字段
5. 输出到 `docs/第四阶段_flutter接后端预备/21个flutter页面的分别说明文档/`

### Step 3：生成 README 索引

在 `docs/第四阶段_flutter接后端预备/` 下生成 `README.md`，索引所有 21 个文档。

---

## 逐页生成提示词

以下提示词用于驱动 AI 按顺序逐个生成 21 个页面文档。每次给出一个页面的提示词，AI 完成后再给下一个。

---

### 通用前置指令（每次对话开头粘贴一次）

```
你是 EchoMind Flutter 前端的文档工程师。你的任务是为第四阶段「接后端预备」生成页面说明文档。

项目路径：D:\AI\AI+high school homework\EchoMind-AI_Error_Tracker\flutter前端\echomind_app
文档输出路径：D:\AI\AI+high school homework\EchoMind-AI_Error_Tracker\docs\第四阶段_flutter接后端预备\21个flutter页面的分别说明文档\
截图路径前缀：../flutter截图验证/

数据模型目录：lib/shared/models/
三态组件目录：lib/shared/widgets/（clay_loading_state.dart, clay_error_state.dart, clay_empty_state.dart, async_data_wrapper.dart）

文档格式要求：
1. 严格按照下方模板格式
2. 必须读取实际 dart 源码，提取真实的硬编码值和参数接口
3. 必须引用已创建的数据模型类，给出完整字段列表
4. API 接口清单要合理设计 RESTful 路径
5. 接入示例要给出可直接参考的 dart 代码片段
6. 截图路径按约定格式填写（截图后续补充，路径先占位）
7. 每个组件都要列出「当前硬编码值」，让后端开发者知道哪些值需要替换

文档模板见：docs/第四阶段_flutter接后端预备/第四阶段规划_页面说明文档生成.md 中的「文档模板」章节。
```

---

### 01 — home 首页

```
生成第四阶段页面文档：01_home_首页.md

请读取以下文件：
- lib/features/home/home_page.dart
- lib/features/home/widgets/top_frame_widget.dart
- lib/features/home/widgets/top_dashboard_widget.dart
- lib/features/home/widgets/action_overlay_widget.dart
- lib/features/home/widgets/recommendation_list_widget.dart
- lib/features/home/widgets/recent_upload_widget.dart
- lib/shared/models/home_models.dart

页面信息：
- 路由: /
- 页面类: HomePage (PageShell, tabIndex: 0)
- 组件: TopFrameWidget, TopDashboardWidget (Hero预测卡+统计行), ActionOverlayWidget (溢出图标双卡片), RecommendationListWidget (优先级分层推荐), RecentUploadWidget
- 数据模型: HomeDashboard, Recommendation, RecentUpload
- 特殊说明: 首页经过 V2 布局重构，有 Hero Card 圆形进度环、溢出图标设计、紧急卡片粉色左边框

输出到：docs/第四阶段_flutter接后端预备/21个flutter页面的分别说明文档/01_home_首页.md
```

---

### 02 — community 社区

```
生成第四阶段页面文档：02_community_社区.md

请读取以下文件：
- lib/features/community/community_page.dart
- lib/features/community/widgets/top_frame_and_tabs_widget.dart
- lib/features/community/widgets/board_my_requests_widget.dart
- lib/features/community/widgets/board_feature_boost_widget.dart
- lib/features/community/widgets/board_feedback_widget.dart
- lib/shared/models/community_models.dart

页面信息：
- 路由: /community
- 页面类: CommunityPage (PageShell, tabIndex: 3)
- 组件: TopFrameAndTabsWidget (Clay内凹Tab切换), BoardMyRequestsWidget (需求列表+提交按钮), BoardFeatureBoostWidget (新功能投票), BoardFeedbackWidget (改版建议)
- 数据模型: CommunityRequest
- 特殊说明: Tab 栏使用 Clay 内凹容器 (#EFEBF5 + shadowClayPressed)，激活 Tab 弹出白色双层阴影。board_my_requests_widget.dart 中有一个旧的 CommunityRequest 类（含 highlight 字段），需迁移到新模型

输出到：docs/第四阶段_flutter接后端预备/21个flutter页面的分别说明文档/02_community_社区.md
```

---

### 03 — community-detail 社区详情

```
生成第四阶段页面文档：03_community-detail_社区详情.md

请读取以下文件：
- lib/features/community/community_detail_page.dart
- lib/shared/models/community_models.dart

页面信息：
- 路由: /community-detail
- 页面类: CommunityDetailPage (Scaffold)
- 组件: 独立页面，无子组件拆分。ClayCard 包裹需求详情内容
- 数据模型: CommunityRequest
- 特殊说明: 从社区页面 push 进入的子页面，展示单条需求的详情（标题、描述、投票数、标签）

输出到：docs/第四阶段_flutter接后端预备/21个flutter页面的分别说明文档/03_community-detail_社区详情.md
```

---

### 04 — global-knowledge 全局知识点

```
生成第四阶段页面文档：04_global-knowledge_全局知识点.md

请读取以下文件：
- lib/features/global_knowledge/global_knowledge_page.dart
- lib/features/global_knowledge/widgets/top_frame_widget.dart
- lib/features/global_knowledge/widgets/knowledge_tree_widget.dart
- lib/shared/models/global_models.dart

页面信息：
- 路由: /global-knowledge
- 页面类: GlobalKnowledgePage (Scaffold)
- 组件: TopFrameWidget (页面标题+返回), KnowledgeTreeWidget (知识点树形结构)
- 数据模型: TreeNode
- 特殊说明: 树形结构展示所有知识点的层级关系和掌握状态

输出到：docs/第四阶段_flutter接后端预备/21个flutter页面的分别说明文档/04_global-knowledge_全局知识点.md
```

---

### 05 — global-model 全局模型

```
生成第四阶段页面文档：05_global-model_全局模型.md

请读取以下文件：
- lib/features/global_model/global_model_page.dart
- lib/features/global_model/widgets/top_frame_widget.dart
- lib/features/global_model/widgets/model_tree_widget.dart
- lib/shared/models/global_models.dart

页面信息：
- 路由: /global-model
- 页面类: GlobalModelPage (Scaffold)
- 组件: TopFrameWidget (页面标题+返回), ModelTreeWidget (模型树形结构)
- 数据模型: TreeNode
- 特殊说明: 树形结构展示所有模型的层级关系和掌握状态，与 global-knowledge 共用 TreeNode 模型

输出到：docs/第四阶段_flutter接后端预备/21个flutter页面的分别说明文档/05_global-model_全局模型.md
```

---

### 06 — global-exam 全局高考卷

```
生成第四阶段页面文档：06_global-exam_全局高考卷.md

请读取以下文件：
- lib/features/global_exam/global_exam_page.dart
- lib/features/global_exam/widgets/top_frame_widget.dart
- lib/features/global_exam/widgets/exam_heatmap_widget.dart
- lib/features/global_exam/widgets/question_type_browser_widget.dart
- lib/features/global_exam/widgets/recent_exams_widget.dart
- lib/shared/models/global_models.dart

页面信息：
- 路由: /global-exam
- 页面类: GlobalExamPage (Scaffold)
- 组件: TopFrameWidget, ExamHeatmapWidget (题目热力图), QuestionTypeBrowserWidget (题型浏览器), RecentExamsWidget (近期考试记录)
- 数据模型: HeatmapQuestion, ExamRecord
- 特殊说明: 热力图以矩阵展示每道题的对错分布，颜色深浅表示得分率

输出到：docs/第四阶段_flutter接后端预备/21个flutter页面的分别说明文档/06_global-exam_全局高考卷.md
```

---

### 07 — memory 记忆

```
生成第四阶段页面文档：07_memory_记忆.md

请读取以下文件：
- lib/features/memory/memory_page.dart
- lib/features/memory/widgets/top_frame_widget.dart
- lib/features/memory/widgets/review_dashboard_widget.dart
- lib/features/memory/widgets/card_category_list_widget.dart
- lib/shared/models/memory_models.dart

页面信息：
- 路由: /memory
- 页面类: MemoryPage (PageShell, tabIndex: 2)
- 组件: TopFrameWidget (标题 28px), ReviewDashboardWidget (今日待复习数+统计卡片), CardCategoryListWidget (分类列表+渐变标签球)
- 数据模型: MemoryDashboard, CardCategory
- 特殊说明: 待复习数字使用 Nunito 48px w900 accent 大号显示，统计卡片用 Nunito 22px w900

输出到：docs/第四阶段_flutter接后端预备/21个flutter页面的分别说明文档/07_memory_记忆.md
```

---

### 08 — flashcard-review 闪卡复习

```
生成第四阶段页面文档：08_flashcard-review_闪卡复习.md

请读取以下文件：
- lib/features/flashcard_review/flashcard_review_page.dart
- lib/features/flashcard_review/widgets/top_frame_widget.dart
- lib/features/flashcard_review/widgets/flashcard_widget.dart
- lib/shared/models/flashcard_models.dart

页面信息：
- 路由: /flashcard-review
- 页面类: FlashcardReviewPage (Scaffold)
- 组件: TopFrameWidget (标题+计数器), FlashcardWidget (闪卡正反面+反馈按钮)
- 数据模型: Flashcard, FlashcardSession
- 特殊说明: 闪卡使用 Clay 加强阴影，反馈按钮（记得/忘了）用 Clay Button 渐变样式，标签药丸用 Clay 风格

输出到：docs/第四阶段_flutter接后端预备/21个flutter页面的分别说明文档/08_flashcard-review_闪卡复习.md
```

---

### 09 — question-aggregate 单题聚合

```
生成第四阶段页面文档：09_question-aggregate_单题聚合.md

请读取以下文件：
- lib/features/question_aggregate/question_aggregate_page.dart
- lib/features/question_aggregate/widgets/top_frame_widget.dart
- lib/features/question_aggregate/widgets/single_question_dashboard_widget.dart
- lib/features/question_aggregate/widgets/exam_analysis_widget.dart
- lib/features/question_aggregate/widgets/question_history_list_widget.dart
- lib/shared/models/question_aggregate_models.dart

页面信息：
- 路由: /question-aggregate
- 页面类: QuestionAggregatePage (Scaffold)
- 组件: TopFrameWidget, SingleQuestionDashboardWidget (统计仪表盘), ExamAnalysisWidget (考试分析+标签药丸), QuestionHistoryListWidget (历史记录列表)
- 数据模型: QuestionAggregate, ExamAnalysis, QuestionHistory
- 特殊说明: 仪表盘用 ClayCard + Nunito 统计数字，考试分析用标签药丸，历史列表用 ClayCard 行

输出到：docs/第四阶段_flutter接后端预备/21个flutter页面的分别说明文档/09_question-aggregate_单题聚合.md
```

---

### 10 — question-detail 题目详情

```
生成第四阶段页面文档：10_question-detail_题目详情.md

请读取以下文件：
- lib/features/question_detail/question_detail_page.dart
- lib/features/question_detail/widgets/top_frame_widget.dart
- lib/features/question_detail/widgets/question_content_widget.dart
- lib/features/question_detail/widgets/answer_result_widget.dart
- lib/features/question_detail/widgets/question_relations_widget.dart
- lib/features/question_detail/widgets/question_source_widget.dart
- lib/shared/models/question_detail_models.dart

页面信息：
- 路由: /question-detail
- 页面类: QuestionDetailPage (Scaffold)
- 组件: TopFrameWidget, QuestionContentWidget (题目内容), AnswerResultWidget (答题结果+状态色), QuestionRelationsWidget (关联知识点/模型), QuestionSourceWidget (题目来源+MUST标签)
- 数据模型: QuestionDetail, QuestionRelation
- 特殊说明: 答题结果用状态色 ClayCard（对/错/待诊断），题目来源用 MUST/TRY/SKIP 标签

输出到：docs/第四阶段_flutter接后端预备/21个flutter页面的分别说明文档/10_question-detail_题目详情.md
```

---

### 11 — ai-diagnosis AI诊断

```
生成第四阶段页面文档：11_ai-diagnosis_AI诊断.md

请读取以下文件：
- lib/features/ai_diagnosis/ai_diagnosis_page.dart
- lib/features/ai_diagnosis/widgets/top_frame_widget.dart
- lib/shared/models/chat_message.dart

页面信息：
- 路由: /ai-diagnosis
- 页面类: AiDiagnosisPage (Scaffold)
- 组件: TopFrameWidget (标题+返回), ChatMessageList (诊断对话主体，使用共享聊天组件)
- 数据模型: ChatMessage (MessageRole, MessageContentType)
- 特殊说明: 聊天页面，使用 shared/widgets/chat/ 下的共享聊天组件（ChatBubble, ChatInputBar, ChatOptionChips, ChatRichCard, ChatMessageList）。ClayBackgroundBlobs 在 ChatMessageList 后面

输出到：docs/第四阶段_flutter接后端预备/21个flutter页面的分别说明文档/11_ai-diagnosis_AI诊断.md
```

---

### 12 — model-detail 模型详情

```
生成第四阶段页面文档：12_model-detail_模型详情.md

请读取以下文件：
- lib/features/model_detail/model_detail_page.dart
- lib/features/model_detail/widgets/top_frame_widget.dart
- lib/features/model_detail/widgets/mastery_dashboard_widget.dart
- lib/features/model_detail/widgets/prerequisite_knowledge_list_widget.dart
- lib/features/model_detail/widgets/related_question_list_widget.dart
- lib/features/model_detail/widgets/training_record_list_widget.dart
- lib/shared/models/model_detail_models.dart
- lib/shared/models/shared_detail_models.dart

页面信息：
- 路由: /model-detail
- 页面类: ModelDetailPage (Scaffold)
- 组件: TopFrameWidget, MasteryDashboardWidget (四层漏斗+预计提分), PrerequisiteKnowledgeListWidget (前置知识点+渐变图标球), RelatedQuestionListWidget (关联题目+状态图标球), TrainingRecordListWidget (训练记录+状态图标球)
- 数据模型: ModelDetail, FunnelLayer, PrerequisiteKnowledge, RelatedQuestion, TrainingRecord
- 特殊说明: 漏斗中卡住的层用粉色渐变(#FF6B6B→#DB2777)，训练按钮用 gradientPrimary

输出到：docs/第四阶段_flutter接后端预备/21个flutter页面的分别说明文档/12_model-detail_模型详情.md
```

---

### 13 — model-training 模型训练

```
生成第四阶段页面文档：13_model-training_模型训练.md

请读取以下文件：
- lib/features/model_training/model_training_page.dart
- lib/features/model_training/widgets/top_frame_widget.dart
- lib/features/model_training/widgets/step_stage_nav_widget.dart
- lib/features/model_training/widgets/step1_identification_training_widget.dart
- lib/shared/models/chat_message.dart

页面信息：
- 路由: /model-training
- 页面类: ModelTrainingPage (Scaffold)
- 组件: TopFrameWidget, StepStageNavWidget (Clay内凹阶段导航), Step1IdentificationTrainingWidget (第一步训练内容), ChatMessageList (训练对话)
- 数据模型: ChatMessage
- 特殊说明: 6步训练流程(step2-step6为Placeholder)，阶段导航用Clay内凹容器(#EFEBF5+shadowClayPressed)，step1用ClayCard包裹

输出到：docs/第四阶段_flutter接后端预备/21个flutter页面的分别说明文档/13_model-training_模型训练.md
```

---

### 14 — knowledge-detail 知识点详情

```
生成第四阶段页面文档：14_knowledge-detail_知识点详情.md

请读取以下文件：
- lib/features/knowledge_detail/knowledge_detail_page.dart
- lib/features/knowledge_detail/widgets/top_frame_widget.dart
- lib/features/knowledge_detail/widgets/mastery_dashboard_widget.dart
- lib/features/knowledge_detail/widgets/concept_test_records_widget.dart
- lib/features/knowledge_detail/widgets/related_models_widget.dart
- lib/shared/models/knowledge_detail_models.dart
- lib/shared/models/shared_detail_models.dart

页面信息：
- 路由: /knowledge-detail
- 页面类: KnowledgeDetailPage (Scaffold)
- 组件: TopFrameWidget, MasteryDashboardWidget (掌握度圆环+等级徽章), ConceptTestRecordsWidget (检测记录+状态图标球), RelatedModelsWidget (关联模型+渐变图标球)
- 数据模型: KnowledgeDetail, ConceptTestRecord, RelatedModel
- 特殊说明: 掌握度圆环用 Nunito 24px w900，等级徽章用 Clay 色阶，学习按钮用 gradientPrimary

输出到：docs/第四阶段_flutter接后端预备/21个flutter页面的分别说明文档/14_knowledge-detail_知识点详情.md
```

---

### 15 — knowledge-learning 知识点学习

```
生成第四阶段页面文档：15_knowledge-learning_知识点学习.md

请读取以下文件：
- lib/features/knowledge_learning/knowledge_learning_page.dart
- lib/features/knowledge_learning/widgets/top_frame_widget.dart
- lib/features/knowledge_learning/widgets/step_stage_nav_widget.dart
- lib/features/knowledge_learning/widgets/step1_concept_present_widget.dart
- lib/shared/models/chat_message.dart

页面信息：
- 路由: /knowledge-learning
- 页面类: KnowledgeLearningPage (Scaffold)
- 组件: TopFrameWidget, StepStageNavWidget (Clay内凹阶段导航), Step1ConceptPresentWidget (概念呈现), ChatMessageList (学习对话)
- 数据模型: ChatMessage
- 特殊说明: 5步学习流程(step2-step5为Placeholder)，与model-training共用相同的Clay阶段导航样式

输出到：docs/第四阶段_flutter接后端预备/21个flutter页面的分别说明文档/15_knowledge-learning_知识点学习.md
```

---

### 16 — prediction-center 预测中心

```
生成第四阶段页面文档：16_prediction-center_预测中心.md

请读取以下文件：
- lib/features/prediction_center/prediction_center_page.dart
- lib/features/prediction_center/widgets/top_frame_widget.dart
- lib/features/prediction_center/widgets/score_card_widget.dart
- lib/features/prediction_center/widgets/trend_card_widget.dart
- lib/features/prediction_center/widgets/score_path_table_widget.dart
- lib/features/prediction_center/widgets/priority_model_list_widget.dart
- lib/shared/models/prediction_models.dart

页面信息：
- 路由: /prediction-center
- 页面类: PredictionCenterPage (Scaffold)
- 组件: TopFrameWidget, ScoreCardWidget (预测分数圆环), TrendCardWidget (趋势折线图), ScorePathTableWidget (提分路径表), PriorityModelListWidget (优先训练模型排名)
- 数据模型: PredictionScore, PriorityModelItem, ScorePathEntry
- 特殊说明: ScoreCard 有 SweepGradient 圆环(#A78BFA→#7C3AED)，PriorityModelList 中已有 PriorityModel 类需迁移到新模型

输出到：docs/第四阶段_flutter接后端预备/21个flutter页面的分别说明文档/16_prediction-center_预测中心.md
```

---

### 17 — upload-history 上传历史

```
生成第四阶段页面文档：17_upload-history_上传历史.md

请读取以下文件：
- lib/features/upload_history/upload_history_page.dart
- lib/features/upload_history/widgets/top_frame_widget.dart
- lib/features/upload_history/widgets/history_filter_widget.dart
- lib/features/upload_history/widgets/history_record_list_widget.dart
- lib/shared/models/upload_history_models.dart

页面信息：
- 路由: /upload-history
- 页面类: UploadHistoryPage (Scaffold)
- 组件: TopFrameWidget, HistoryFilterWidget (Clay内凹筛选药丸), HistoryRecordListWidget (按日期分组的记录列表)
- 数据模型: UploadRecord, UploadDateGroup
- 特殊说明: 筛选器用Clay内凹药丸，记录列表按日期分组，每条记录用ClayCard行

输出到：docs/第四阶段_flutter接后端预备/21个flutter页面的分别说明文档/17_upload-history_上传历史.md
```

---

### 18 — weekly-review 周复盘

```
生成第四阶段页面文档：18_weekly-review_周复盘.md

请读取以下文件：
- lib/features/weekly_review/weekly_review_page.dart
- lib/features/weekly_review/widgets/top_frame_widget.dart
- lib/features/weekly_review/widgets/weekly_dashboard_widget.dart
- lib/features/weekly_review/widgets/score_change_widget.dart
- lib/features/weekly_review/widgets/weekly_progress_widget.dart
- lib/features/weekly_review/widgets/next_week_focus_widget.dart
- lib/shared/models/weekly_review_models.dart

页面信息：
- 路由: /weekly-review
- 页面类: WeeklyReviewPage (Scaffold)
- 组件: TopFrameWidget, WeeklyDashboardWidget (周仪表盘+Nunito大号数字), ScoreChangeWidget (分数变化+渐变箭头), WeeklyProgressWidget (本周进度列表), NextWeekFocusWidget (下周聚焦列表)
- 数据模型: WeeklyReview, DailyScore, WeeklyProgress, NextWeekFocus
- 特殊说明: 仪表盘用ClayCard+Nunito大号数字，分数变化用渐变箭头+Clay对比卡

输出到：docs/第四阶段_flutter接后端预备/21个flutter页面的分别说明文档/18_weekly-review_周复盘.md
```

---

### 19 — profile 我的

```
生成第四阶段页面文档：19_profile_我的.md

请读取以下文件：
- lib/features/profile/profile_page.dart
- lib/features/profile/widgets/top_frame_widget.dart
- lib/features/profile/widgets/user_info_card_widget.dart
- lib/features/profile/widgets/learning_stats_widget.dart
- lib/features/profile/widgets/target_score_card_widget.dart
- lib/features/profile/widgets/three_row_navigation_widget.dart
- lib/features/profile/widgets/two_row_navigation_widget.dart
- lib/shared/models/profile_models.dart

页面信息：
- 路由: /profile
- 页面类: ProfilePage (PageShell, tabIndex: 4)
- 组件: TopFrameWidget, UserInfoCardWidget (Hero用户信息卡+头像球), LearningStatsWidget (Clay Stat Orb统计行), TargetScoreCardWidget (目标分卡+进度条), ThreeRowNavigationWidget (三行导航), TwoRowNavigationWidget (两行导航)
- 数据模型: UserProfile, LearningStats
- 特殊说明: 用户信息卡用 gradientHero 背景+渐变头像球，统计行用 Clay Stat Orb

输出到：docs/第四阶段_flutter接后端预备/21个flutter页面的分别说明文档/19_profile_我的.md
```

---

### 20 — upload-menu 上传菜单

```
生成第四阶段页面文档：20_upload-menu_上传菜单.md

请读取以下文件：
- lib/features/upload_menu/upload_menu_page.dart
- lib/features/upload_menu/widgets/top_frame_widget.dart
- lib/features/upload_menu/widgets/main_content_widget.dart

页面信息：
- 路由: /upload-menu
- 页面类: UploadMenuPage (Scaffold)
- 组件: TopFrameWidget (标题+返回), MainContentWidget (上传方式选择)
- 数据模型: 无（纯导航页，上传方式为固定选项）
- 特殊说明: 纯导航页面，提供拍照上传、文本上传等入口。无需后端数据，但上传动作本身需要接入上传 API

输出到：docs/第四阶段_flutter接后端预备/21个flutter页面的分别说明文档/20_upload-menu_上传菜单.md
```

---

### 21 — register-strategy 学习策略

```
生成第四阶段页面文档：21_register-strategy_学习策略.md

请读取以下文件：
- lib/features/register_strategy/register_strategy_page.dart
- lib/features/register_strategy/widgets/top_frame_widget.dart
- lib/features/register_strategy/widgets/main_content_widget.dart

页面信息：
- 路由: /register-strategy
- 页面类: RegisterStrategyPage (Scaffold)
- 组件: TopFrameWidget (标题+返回), MainContentWidget (策略选择)
- 数据模型: 无（纯导航页，策略选项为固定选项）
- 特殊说明: 纯导航页面，用户选择考试策略。无需后端数据拉取，但选择结果需要提交到后端保存

输出到：docs/第四阶段_flutter接后端预备/21个flutter页面的分别说明文档/21_register-strategy_学习策略.md
```

---

## 使用方式

1. 先粘贴「通用前置指令」
2. 然后按 01→21 的顺序，逐个粘贴每个页面的提示词
3. AI 完成一个页面文档后，再粘贴下一个
4. 全部完成后，生成 README.md 索引

## 截图采集（独立步骤）

截图需要在安卓模拟器上运行，与文档生成可以并行。截图完成后替换文档中的占位路径即可。

截图脚本参考第三阶段的 `integration_test/screenshot_stage3_test.dart`，修改输出路径为 `docs/第四阶段_flutter接后端预备/flutter截图验证/`。

## 文件产出清单

```
docs/第四阶段_flutter接后端预备/
├── README.md                          (索引)
├── 第四阶段规划_页面说明文档生成.md    (本文件)
├── 21个flutter页面的分别说明文档/
│   ├── 01_home_首页.md
│   ├── 02_community_社区.md
│   ├── ...
│   └── 21_register-strategy_学习策略.md
└── flutter截图验证/
    ├── home/
    │   ├── full/
    │   └── components/
    ├── community/
    ... (21个页面目录)
```

## 已完成的前端预备工作

在生成文档之前，已完成以下前端预备：

### 数据模型（lib/shared/models/）

| 文件 | 模型类 |
|------|--------|
| `home_models.dart` | HomeDashboard, Recommendation, RecentUpload |
| `profile_models.dart` | UserProfile, LearningStats |
| `prediction_models.dart` | PredictionScore, PriorityModelItem, ScorePathEntry |
| `weekly_review_models.dart` | WeeklyReview, DailyScore, WeeklyProgress, NextWeekFocus |
| `question_aggregate_models.dart` | QuestionAggregate, ExamAnalysis, QuestionHistory |
| `question_detail_models.dart` | QuestionDetail, QuestionRelation |
| `upload_history_models.dart` | UploadRecord, UploadDateGroup |
| `model_detail_models.dart` | ModelDetail, FunnelLayer |
| `knowledge_detail_models.dart` | KnowledgeDetail, ConceptTestRecord, RelatedModel |
| `shared_detail_models.dart` | TrainingRecord, PrerequisiteKnowledge, RelatedQuestion |
| `memory_models.dart` | MemoryDashboard, CardCategory |
| `flashcard_models.dart` | Flashcard, FlashcardSession |
| `community_models.dart` | CommunityRequest |
| `global_models.dart` | TreeNode, ExamRecord, HeatmapQuestion |
| `models.dart` | 统一导出（barrel export） |

所有模型均包含：`const` 构造函数、`fromJson` 工厂方法、`toJson` 方法。

### 三态组件（lib/shared/widgets/）

| 文件 | 组件 | 用途 |
|------|------|------|
| `clay_loading_state.dart` | ClayLoadingState | 骨架屏加载动画（脉冲闪烁 ClayCard 占位） |
| `clay_error_state.dart` | ClayErrorState | 错误状态（粉色图标球 + 重试按钮） |
| `clay_empty_state.dart` | ClayEmptyState | 空数据状态（蓝色图标球 + 自定义消息） |
| `async_data_wrapper.dart` | AsyncDataWrapper\<T\> | 泛型包装器，自动切换 loading/error/empty/data 四态 |
