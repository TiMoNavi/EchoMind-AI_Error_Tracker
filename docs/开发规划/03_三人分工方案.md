# 3人分工方案（纯开发）

> 你（PM+架构+开发）+ 同学A + 同学B
> 教研数据由专人提供，开发团队不负责数据来源

---

## 角色定义

### 你 — PM + 架构师 + 核心开发

**职责：**
- 数据库Schema设计与维护
- 后端核心API设计（OpenAPI文档）
- AI诊断Prompt编写与调优
- 状态引擎核心算法实现（标签更新、路由规则）
- Code Review + 每日站会
- 部署与运维

**产出占比：** ~50%编码 + 50%设计/管理

### 同学A — 后端开发

**职责：**
- FastAPI项目搭建与API实现
- 用户认证系统
- 业务API（上传、历史、树查询、推荐）
- 卷面策略生成引擎
- AI大模型调用对接
- 种子数据导入脚本（接收教研人员交付的数据文件→写入DB）

**技能要求：** Python、SQL、REST API

### 同学B — Flutter前端开发

**职责：**
- Flutter页面开发（从HTML原型转换）
- 网络层封装（Dio + Token）
- 状态管理（Riverpod）
- 拍照上传功能
- 图表/可视化组件
- UI还原与交互

**技能要求：** Flutter/Dart、移动端开发

---

## 每周分工矩阵

### 第1周：地基

| 人 | 任务 | 交付物 |
|----|------|--------|
| 你 | DB Schema设计 + 建表SQL + Alembic迁移 | 8张核心表 |
| 你 | API接口文档（OpenAPI） | Swagger文档，前后端并行的基础 |
| 你 | 定义教研数据交付格式 + 交给教研人员 | 模板Excel/JSON Schema |
| A | FastAPI骨架搭建 | 项目结构+中间件+CORS |
| A | 用户注册/登录API | POST /auth/register, /auth/login |
| A | 数据库连接+ORM模型 | SQLAlchemy models |
| B | Dio网络层封装 | api_client.dart + token拦截器 |
| B | Riverpod基础Provider | auth_provider, user_provider |
| B | 注册页R1（基础信息） | 地区/科目/目标分数表单 |

### 第2周：数据入口

| 人 | 任务 | 交付物 |
|----|------|--------|
| 你 | 状态引擎核心实现（标签更新算法） | 4条更新路径的规则引擎 |
| 你 | 卷面策略规则实现 | 纯if-else读模板生成策略 |
| 你 | Code Review + 联调协调 | — |
| A | 题目上传API（图片+标注） | POST /questions/upload |
| A | 上传历史API | GET /questions/history |
| A | 知识点/模型树API | GET /knowledge/tree, /model/tree |
| A | 种子数据导入脚本 | 教研交付JSON→写入DB |
| B | 注册页R2（策略展示） | 🔴🟡⚪策略表UI |
| B | 拍照上传页 | 相机/相册+标对错+提交 |
| B | 上传历史页 | 按日期分组列表 |
| B | 全局知识点树 + 模型树页 | 三级可展开树 |

### 第3周：AI诊断 + 状态

| 人 | 任务 | 交付物 |
|----|------|--------|
| 你 | AI诊断Prompt编写与调优 | 四层定位+三段式话术模板 |
| 你 | 推荐排序算法实现 | 简化版priority_score |
| 你 | 状态引擎Review + 边界修复 | — |
| A | AI诊断API（大模型调用） | POST /diagnosis/analyze |
| A | 推荐列表API | GET /recommendations |
| A | 模型/知识点详情API | GET /models/:id, /kp/:id |
| B | AI诊断结果页 | 四层定位+三段式展示 |
| B | 主页推荐列表 | 卡片列表+跳转 |
| B | 主页顶部仪表盘 | 今日数据+掌握概览 |
| B | 模型详情页 + 知识点详情页 | 掌握度仪表盘 |

### 第4周：闭环 + 打磨

| 人 | 任务 | 交付物 |
|----|------|--------|
| 你 | 注册诊断逻辑实现（R3自适应出题） | 基于diagnosis_path的出题引擎 |
| 你 | 全链路测试 + Bug修复 | 测试用例+Bug清单 |
| 你 | Docker部署 | Docker Compose + 服务器上线 |
| A | 注册诊断API（R3） | POST /diagnosis/initial |
| A | 高考题号数据API | GET /exam/questions |
| A | Bug修复 + 性能优化 | — |
| B | 注册页R3（诊断交互） | 答题+结果展示 |
| B | 卷面热力图 | fl_chart色块图 |
| B | Profile页 + 上传菜单弹窗 | 个人信息+三种上传入口 |
| B | 全链路UI打磨 | 动画、loading、错误态 |

---

## 协作规范

- **每日站会**：15分钟，每人说3件事（昨天做了/今天做/有无阻塞）
- **分支策略**：main + feature分支，PR合并需你Review
- **接口约定**：第1周你出OpenAPI文档，前后端按文档并行开发
- **联调节奏**：每周五下午集中联调2小时

---

## 教研人员交付物清单

> 开发团队不负责数据内容，但需要定义数据格式。教研人员按格式填充内容。

### 阻塞关系：教研交付 → 开发可用

| # | 交付物 | 格式 | 截止时间 | 阻塞谁 |
|---|--------|------|----------|--------|
| 1 | 知识点清单（章→节→知识点，含conclusion_level） | JSON | 第1周末 | 第2周B的知识树页 |
| 2 | 模型清单（章→节→模型，含前置知识点关联） | JSON | 第1周末 | 第2周B的模型树页 |
| 3 | 天津物理地区模板（至少70/80分两档） | JSON | 第2周中 | 第2周你的策略引擎 |
| 4 | 易混组定义 + 对比表 | JSON | 第3周末 | 暂不阻塞MVP |
| 5 | 注册诊断用预设题（每个tier 1模型至少1题） | JSON+图片 | 第3周末 | 第4周R3诊断 |
| 6 | 高考真题题号→模型映射（近2年） | JSON | 第3周末 | 第4周热力图 |

### 你第1周要做的事

给教研人员一份**数据模板文件**（Excel或JSON Schema），明确每个字段的含义和示例值。不需要你填数据，但格式必须你定义。
