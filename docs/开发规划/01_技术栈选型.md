# 技术栈选型

## 前端（Flutter）

| 类别 | 选型 | 理由 |
|------|------|------|
| 状态管理 | Riverpod 2.x | 编译安全、支持异步、3人协作不易冲突 |
| 路由 | 现有 onGenerateRoute（已搭建） | 够用，不需要引入 go_router |
| 网络请求 | Dio | 拦截器、Token刷新、错误统一处理 |
| 本地存储 | shared_preferences + Hive | 轻量配置用SP，结构化缓存用Hive |
| 图片/拍照 | image_picker + camera | 上传拍照核心功能 |
| 图表 | fl_chart | 热力图、漏斗图、趋势图 |
| JSON序列化 | json_serializable + freezed | 类型安全的数据模型 |

## 后端

| 类别 | 选型 | 理由 |
|------|------|------|
| 框架 | Python FastAPI | 团队熟悉度高、异步支持好、AI调用方便 |
| 数据库 | PostgreSQL | JSON字段支持好（exam_strategy等复杂结构）、免费 |
| ORM | SQLAlchemy 2.0 + Alembic | 迁移管理、类型提示 |
| AI调用 | OpenAI SDK（兼容国内大模型API） | 诊断/对话层统一接口 |
| 文件存储 | 阿里云OSS / AWS S3 | 拍照上传的图片存储 |
| OCR | 大模型视觉能力（GPT-4V/通义千问VL） | 题目识别，~0.1元/次 |
| 部署 | Docker + 云服务器 | 3人团队最简部署方案 |

## 为什么不用 Firebase/Supabase？

产品的核心是**路由规则引擎 + AI诊断对话**，这两个都需要自定义后端逻辑。BaaS 在这个场景下反而增加复杂度。
