# 客户需求分析（高中错题闭环系统）

> 分析来源：`now/now/core_framework_v2.0.md`、`now/now/功能域划分与数据关联.md`、`now/now/痛点分析与评估.md`、`now/now/记录文件.md`  
> 目标：把超长需求文档整理成你可直接开发的“模块 + 前端功能 + 页面清单 + 优先级”。

---

## 1. 客户要的不是“答题App”，而是“提分闭环系统”

### 1.1 核心目标
- 不是只给答案，而是定位错因并分流到后续训练。
- 形成完整闭环：上传错题 → AI诊断 → 路由训练（模型/知识点）→ 掌握度更新 → 预测分变化 → 推荐下一步。

### 1.2 三个核心卖点（产品价值）
- 卖点A：掌握状态可视化（学生/家长一眼看懂卡在哪）。
- 卖点B：高考题号视角（按题号看“能拿几分”+卷面策略）。
- 卖点C：四层诊断（建模/列式/执行/稳定），不是“错了重做”。

### 1.3 用户角色
- 主要用户：高三学生（高频使用者）。
- 付费决策者：家长（通过报告/可视化感知价值）。
- 渠道角色：老师/机构（分销和推荐）。

---

## 2. 你需要开发的模块（按开发视角重组）

## 2.1 P0 核心闭环模块（必须先做）
| 模块 | 核心能力 | 关键前端功能 |
|---|---|---|
| M1 注册与初始化 | 目标分、卷面策略、自适应诊断初始化 | R1/R2/R3流程、策略表展示、目标分变更弹窗 |
| M2 上传与错题归档 | 全部数据入口 | “+”上传菜单、拍照上传流、对错标注、上传历史筛选 |
| M3 AI诊断 | 错因定位与分流 | 5轮对话页、四层定位结果卡、跳转训练入口 |
| M4 状态追踪与路由 | 标签驱动训练入口 | L0-L5可视化、按current_level自动跳Step、快检/审题插入 |
| M5 模型训练体系 | 六步训练闭环 | Step1-6交互、分步填空、易混对比弹窗、不敢写提示 |
| M6 知识点学习体系 | 五步学习闭环 | AI引导学习流、概念检测、一级/二级结论差异路径 |

## 2.2 P1 增强价值模块（核心闭环后接入）
| 模块 | 核心能力 | 关键前端功能 |
|---|---|---|
| M7 全局三Tab看板 | 知识点/模型/高考卷子全景 | 三级树、题号聚合、掌握度图标、跨章模型标签 |
| M8 预测系统 | 预测总分与提分路径 | 预测中心、趋势图、题号页叠加“X/Y分” |
| M9 推荐与周复盘 | 决策“下一步做什么” | 首页推荐卡、快速开始、周复盘Top3、粗心消杀入口 |
| M10 记忆系统 | 9类闪卡+SM-2复习 | 记忆首页、闪卡翻转、忘了/记得/简单按钮 |
| M11 状态可视化与报告 | 付费感知与转化 | 卷面热力图、模型漏斗图、诊断报告动态揭晓+静态页 |

## 2.3 P2 运营模块（可后置）
| 模块 | 核心能力 | 关键前端功能 |
|---|---|---|
| M12 社区与运营 | 需求收集和投票 | 社区三子Tab、投票列表 |
| M13 分享H5 | 面向家长/老师只读分享 | 生成带token链接、只读报告页 |

---

## 3. 前端页面清单（你要做哪些页面）

## 3.1 一级页面（底部主导航）
- P1 主页
- P2 全局-知识点
- P3 全局-模型
- P4 全局-高考卷子
- P5 记忆
- P6 社区（见“冲突待确认”）
- P6b 我的

## 3.2 二级核心业务页面
- P7 知识点详情
- P8 模型详情
- P9 题号聚合
- P10 题目详情
- P11 闪卡复习
- P12 知识点学习流（5步）
- P13 模型训练流（6步）
- P14 AI诊断对话
- P15 统一上传历史
- P16 预测中心
- P17 周复盘
- P18 审题训练
- P19 快检

## 3.3 弹窗/流程页
- M1 “+”上传菜单
- M2 拍照上传流
- M3 易混模型对比表
- M4 “不敢写”提示
- M5 粗心消杀

## 3.4 注册/引导页
- R1 注册-基础信息
- R2 注册-卷面策略
- R3 注册-自适应诊断

## 3.5 报告/分享页（商业化关键）
- P_report 诊断报告页（动态揭晓 + 静态可截图）
- H5_share 家长/老师只读分享页

## 3.6 与当前原型页面的差异（按现有`now/now/v2.0/*.html`对照）

### 已有原型（可迁移到Flutter）
- 首页、全局三Tab、预测中心、题号聚合、题目详情、AI诊断、模型详情、模型训练、知识点详情、知识点学习、上传历史、记忆、闪卡复习、周复盘、社区、我的。

### 当前文档已明确但原型不足（需新建或重做）
- 注册三页：R1/R2/R3。
- 审题训练：P18。
- 快检：P19。
- 上传流程页：M1/M2（原型里只部分覆盖）。
- 易混对比弹窗M3、“不敢写”提示M4、粗心消杀M5。
- 诊断报告页P_report、分享页H5_share。

---

## 4. 页面与功能映射（你开发时可直接按这个拆任务）

- 首页链路：P1 → P10 → P14 → P12/P13 → P17
- 全局链路：P2/P3/P4 → P7/P8/P9 → P10
- 上传链路：P1“+” → M1 → M2 → P15 → P10 → P14
- 预测链路：P1 → P16 + P4/P9题号预测叠加
- 记忆链路：P5 → P11
- 注册首登链路：R1 → R2 → R3 → P1
- 报告转化链路：R3/P14结果 → P_report → H5_share

---

## 5. 前端必须体现的关键业务规则（占位数据也要有）

- 掌握度统一：L0-L5，且L1/L2/L3代表“卡在哪一层”，不是错题次数。
- 诊断上限：AI诊断最多5轮。
- 快检触发：`last_active > 14天` 且非“做错题分流”场景。
- 超时规则：错题`pending`超过3天默认保守降级（后续诊断可修正）。
- 升降级原则：只有“做错”才降级；上传标“对”只更新活跃度，不升级。
- 学习入口规则：模型训练按current_level跳Step；知识点按current_level/conclusion_level跳Step。
- 闭环计数：知识点学习和闪卡不计入闭环数。

---

## 6. 你当前应按什么顺序开发（Flutter + 占位后端）

### 阶段1（先跑通骨架）
- 完成底部导航、全局三Tab、主路由。
- 建立6个核心Mock实体：Student / Model / KnowledgePoint / Question / Flashcard / RegionalTemplate。

### 阶段2（打通“错题闭环主链路”）
- 先做：P1、P10、P14、P13、P12、P15。
- 用本地假数据模拟：diagnosis_status、current_level变化、推荐卡重排。

### 阶段3（做可视化与提分感知）
- 接入：P16预测中心、P17周复盘、卷面热力图、模型漏斗图、P_report。

### 阶段4（补运营能力）
- 审题训练、快检、粗心消杀、分享H5、社区（若确认保留）。

---

## 7. 文档里的冲突与待确认（开发前必须拍板）

### 7.1 社区Tab是否V1上线
- 一处写法：社区Tab保留（有P6）。
- 后续决策：Q82写“砍掉社区Tab，核心功能全做，社区V2”。
- 建议：先按“可插拔模块”做，默认不放主导航，保留路由开关。

### 7.2 定价版本冲突
- 一处写法：500/月 vs 1000/月。
- 后续决策：500元诊断单品 + 3000元到高考前（非月付）。
- 建议：前端文案和套餐页按“500 + 3000”实现，旧月付文案下线。

### 7.3 V1学科范围冲突
- 一处写法：V1物理+数学。
- 后续分销章节写法：首批科目物理。
- 建议：先做“多学科可配置壳”，默认只开放物理数据。

### 7.4 仍待深化项（对前端影响中等）
- “我们的题测试”与“学生的题更新”算法细化仍在待完善。
- 推荐权重细节、卷子上传外部流程细节，后续可能调参。

---

## 8. 最终落地结论（给你一句话版）

你要开发的不是普通刷题App，而是一个“状态驱动的学习决策系统”。  
前端至少要覆盖：注册诊断、上传归档、AI分层诊断、模型/知识点双训练流、全局三视角看板、预测与周复盘、闪卡记忆、诊断报告与分享。
